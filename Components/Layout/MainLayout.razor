@inherits LayoutComponentBase

@* 1. Place the Theme and Providers at the top *@
<MudThemeProvider Theme="_cyberTheme" IsDarkMode="true" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1">
    <MudButton href="/" Variant="Variant.Text" Class="ml-3 px-2" Style="text-transform:none;">
    <MudText Typo="Typo.h5" Style="color: white; font-weight: 900; letter-spacing: -1px;">
        FindAJob.bg
    </MudText>
</MudButton>
    <MudSpacer />
    <AuthorizeView>
    <Authorized>
        @* The Dashboard Link *@
        <MudButton Href="/ManageJobs" 
                   Variant="Variant.Text" 
                   Style="color: #00f0ff; font-family: monospace; border: 1px solid #00f0ff; margin-right: 15px;">
            [ADMIN_TERMINAL]
        </MudButton>

        <MudText Typo="Typo.body1" Class="mr-4">
            Welcome, <b>@context.User.Identity?.Name</b>
        </MudText>
        
        <form action="Account/Logout" method="post" @formname="logout-main" style="display:inline">
            <AntiforgeryToken />
            <button type="submit" class="mud-button-root">LOGOUT</button>
        </form>
    </Authorized>
    <NotAuthorized>
        <MudButton href="/Login" Variant="Variant.Filled" Color="Color.Primary">
            Log in
        </MudButton>
    </NotAuthorized>
</AuthorizeView>
</MudAppBar>
    <MudMainContent Class="mt-16 pa-8">
        @Body
    </MudMainContent>
</MudLayout>

@code {
    // 2. Define the theme in the code block
    private MudTheme _cyberTheme = new MudTheme()
    {
        PaletteDark = new PaletteDark()
        {
            Primary = "#00f0ff",      // Cyan
            Secondary = "#ff003c",    // Cyber Red
            Background = "#0a0a0a",   // Pitch Black
            Surface = "#121212",      // Dark Gray for Cards
            AppbarBackground = "#050505",
            TextPrimary = "#ffffff",
            TextSecondary = "rgba(255,255,255, 0.70)",
            ActionDefault = "#00f0ff",
            LinesDefault = "#333333",
            Divider = "#333333"
        }
    };
}
